#!/bin/bash

echo "๐ ุจูุช ุชุญููู ุงูููุฏูููุงุช ูู ุชูููุบุฑุงู"
echo "====================================="

# ุงูุชุญูู ูู Python
if ! command -v python3 &> /dev/null; then
    echo "โ Python3 ุบูุฑ ูุซุจุช! ูุฑุฌู ุชุซุจูุช Python 3.8+ ุฃููุงู"
    exit 1
fi

# ุงูุชุญูู ูู pip
if ! command -v pip3 &> /dev/null; then
    echo "โ pip3 ุบูุฑ ูุชููุฑ!"
    exit 1
fi

echo "โ Python ูุชููุฑ"

# ุชุซุจูุช ุงููุชุทูุจุงุช
echo "๐ฆ ุชุซุจูุช ุงููุชุทูุจุงุช..."
pip3 install -r requirements.txt

# ุงูุชุญูู ูู ููู .env
if [ ! -f .env ]; then
    echo "โ๏ธ ููู .env ุบูุฑ ููุฌูุฏ"
    echo "๐ ุชุดุบูู ุงูุฅุนุฏุงุฏ..."
    python3 setup.py
fi

# ูุญุต ุตุญุฉ ุงูุจูุช
echo "๐ฅ ูุญุต ุตุญุฉ ุงูุจูุช..."
python3 health_check.py
if [ $? -ne 0 ]; then
    echo "โ ูุดู ูุญุต ุงูุตุญุฉ! ูุฑุฌู ุฅุตูุงุญ ุงูุฃุฎุทุงุก ุฃููุงู"
    exit 1
fi

# ุชุดุบูู ุงูุจูุช
echo "๐ ุชุดุบูู ุงูุจูุช..."
python3 main.py