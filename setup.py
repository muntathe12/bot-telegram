"""
Ø¥Ø¹Ø¯Ø§Ø¯ Ø³Ø±ÙŠØ¹ Ù„Ù„Ø¨ÙˆØª
"""
import os
import sys

def create_env_file():
    """
    Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù .env Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
    """
    if os.path.exists('.env'):
        print("âœ… Ù…Ù„Ù .env Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„")
        return
    
    print("ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù .env...")
    
    bot_token = input("ğŸ¤– Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„Ø¨ÙˆØª (BOT_TOKEN): ").strip()
    
    if not bot_token:
        print("âŒ ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ø§Ù„Ø¨ÙˆØª!")
        return False
    
    env_content = f"""# Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© Ù„Ù„Ø¨ÙˆØª
BOT_TOKEN={bot_token}
LOG_LEVEL=INFO
"""
    
    with open('.env', 'w', encoding='utf-8') as f:
        f.write(env_content)
    
    print("âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù .env Ø¨Ù†Ø¬Ø§Ø­!")
    return True

def check_requirements():
    """
    Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
    """
    print("ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª...")
    
    required_packages = [
        'telegram',
        'yt_dlp',
        'requests',
        'aiohttp',
        'aiofiles'
    ]
    
    missing_packages = []
    
    for package in required_packages:
        try:
            __import__(package.replace('-', '_'))
            print(f"âœ… {package}")
        except ImportError:
            print(f"âŒ {package}")
            missing_packages.append(package)
    
    if missing_packages:
        print(f"\nğŸ“¦ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø©: {', '.join(missing_packages)}")
        print("ğŸ’¡ Ù‚Ù… Ø¨ØªØ´ØºÙŠÙ„: pip install -r requirements.txt")
        return False
    
    print("âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ù…ØªÙˆÙØ±Ø©!")
    return True

def main():
    """
    Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ
    """
    print("ğŸš€ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙˆØª ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª!")
    print("=" * 50)
    
    # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Python version
    if sys.version_info < (3, 8):
        print("âŒ ÙŠØªØ·Ù„Ø¨ Python 3.8 Ø£Ùˆ Ø£Ø­Ø¯Ø«!")
        return
    
    print(f"âœ… Python {sys.version_info.major}.{sys.version_info.minor}")
    
    # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
    if not check_requirements():
        print("\nğŸ’¡ Ù‚Ù… Ø¨ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø£ÙˆÙ„Ø§Ù‹:")
        print("pip install -r requirements.txt")
        return
    
    # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù .env
    if not create_env_file():
        return
    
    print("\n" + "=" * 50)
    print("ğŸ‰ ØªÙ… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨Ù†Ø¬Ø§Ø­!")
    print("\nğŸ“‹ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:")
    print("1. ØªØ£ÙƒØ¯ Ù…Ù† ØµØ­Ø© Ø±Ù…Ø² Ø§Ù„Ø¨ÙˆØª ÙÙŠ Ù…Ù„Ù .env")
    print("2. Ø´ØºÙ„ Ø§Ù„Ø¨ÙˆØª: python main.py")
    print("3. Ø§Ø®ØªØ¨Ø± Ø§Ù„Ø¨ÙˆØª Ø¨Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· ÙÙŠØ¯ÙŠÙˆ")
    print("\nğŸŒ Ù„Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ Render:")
    print("1. Ø§Ø±ÙØ¹ Ø§Ù„ÙƒÙˆØ¯ Ø¹Ù„Ù‰ GitHub")
    print("2. Ø£Ù†Ø´Ø¦ Web Service ÙÙŠ Render")
    print("3. Ø£Ø¶Ù BOT_TOKEN ÙÙŠ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©")
    print("4. Ø§Ù†Ø´Ø± Ø§Ù„Ù…Ø´Ø±ÙˆØ¹!")

if __name__ == "__main__":
    main()